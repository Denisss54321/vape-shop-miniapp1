<!DOCTYPE html>
<html lang="ru">
<head><meta charset="UTF-8"><title>Оформление</title><link rel="stylesheet" href="style.css"><script src="https://telegram.org/js/telegram-web-app.js"></script></head>
<body>
  <h1>Оформить заказ</h1>
  <div id="orderInfo"></div>
  <form id="orderForm">
    <label>Адрес доставки:<br><input name="address" required></label><br><br>
    <label>Телефон:<br><input name="phone" required></label><br><br>
    <label>Оплата:
      <select name="payment">
        <option value="stars">Telegram ⭐</option>
        <option value="cash">Наличные</option>
      </select>
    </label><br><br>
    <button type="submit">Отправить заказ</button>
  </form>
  <script>
    const tg = window.Telegram.WebApp; tg.expand();

    const cart = JSON.parse(localStorage.getItem("tg_cart") || "[]");
    const info = document.getElementById("orderInfo");
    cart.forEach(p => {
      info.innerHTML += `<p>${p.name} — ${p.price}₸</p>`;
    });

    document.getElementById("orderForm").addEventListener("submit", e => {
      e.preventDefault();
      const form = e.target;
      const order = { cart, address: form.address.value, phone: form.phone.value, payment: form.payment.value };
      tg.sendData(JSON.stringify(order));
    });
  </script>
</body>
</html>