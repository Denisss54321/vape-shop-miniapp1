<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      padding: 1rem;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, sans-serif;
      background: none;
      color: white;
      min-height: 100vh;
      max-width: 480px;
      margin-left: auto;
      margin-right: auto;
      position: relative;
      overflow-x: hidden;
    }

    body::after {
      content: "";
      position: fixed;
      inset: 0;
      background-image: url('background.jpeg');
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      background-attachment: fixed;
      z-index: -2;
    }

    body::before {
      content: "";
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.5);
      z-index: -1;
    }

    h1 {
      text-align: center;
      font-size: 1.75rem;
      margin-bottom: 1.5rem;
    }

    form {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }

    input, textarea, select, button {
      font-size: 1rem;
      padding: 0.75rem;
      border-radius: 8px;
      border: none;
      outline: none;
    }

    input, textarea {
      background: rgba(255, 255, 255, 0.1);
      color: white;
      backdrop-filter: blur(6px);
    }

    select {
      background: rgba(255, 255, 255, 0.9);
      color: black;
      backdrop-filter: blur(6px);
    }

    textarea {
      resize: none;
      min-height: 80px;
    }

    ::placeholder {
      color: #ccc;
    }

    button {
      background: rgba(0, 0, 0, 0.6);
      color: white;
      cursor: pointer;
      font-weight: bold;
      transition: background 0.3s ease;
    }

    button:hover {
      background: rgba(0, 122, 184, 1);
    }

    label {
      font-size: 0.95rem;
      color: #ccc;
    }
  </style>
</head>
<body>
  <h1>–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞</h1>

  <form id="orderForm">
    <label for="items">–ü–æ–∑–∏—Ü–∏–∏ (–Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –∏ –≤–∫—É—Å)</label>
    <textarea id="items" placeholder="–ü—Ä–∏–º–µ—Ä: Elf Bar 5000, –≤–∫—É—Å: –∫–ª—É–±–Ω–∏–∫–∞ –∞—Ä–±—É–∑" required></textarea>

    <label for="username">–Æ–∑–µ—Ä–Ω–µ–π–º –∫–ª–∏–µ–Ω—Ç–∞ (@username)</label>
    <input type="text" id="username" placeholder="@example" />

    <label for="phone">–ù–æ–º–µ—Ä –¥–ª—è —Å–≤—è–∑–∏</label>
    <input type="tel" id="phone" placeholder="+7 777 123 4567" required />

    <label for="address">–ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏</label>
    <textarea id="address" placeholder="–≥. –ê–ª–º–∞—Ç—ã, —É–ª. –ê–±–∞—è 10" required></textarea>

    <label for="payment">–°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã</label>
    <select id="payment" required>
      <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Å–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã</option>
      <option value="Kaspi">Kaspi</option>
      <option value="–ù–∞–ª–∏—á–Ω—ã–µ">–ù–∞–ª–∏—á–Ω—ã–µ</option>
      <option value="Forte">Forte</option>
      <option value="Halyk">Halyk</option>
    </select>

    <label for="sum">–°—É–º–º–∞ –∑–∞–∫–∞–∑–∞ (–≤ ‚Ç∏)</label>
    <input type="number" id="sum" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: 14000" required />

    <button type="submit">üì¶ –û—Ñ–æ—Ä–º–∏—Ç—å</button>
  </form>

  <script>
    document.getElementById("orderForm").addEventListener("submit", async (e) => {
      e.preventDefault();

      const tgUser = window.Telegram?.WebApp?.initDataUnsafe?.user;

      const data = {
        items: document.getElementById("items").value.trim(),
        username: document.getElementById("username").value.trim(),
        phone: document.getElementById("phone").value.trim(),
        address: document.getElementById("address").value.trim(),
        payment: document.getElementById("payment").value,
        sum: document.getElementById("sum").value.trim(),
      };

      const displayUsername = data.username || (tgUser?.username ? `@${tgUser.username}` : data.phone || tgUser?.first_name || "–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π");

      const text = `
–ù–æ–≤—ã–π –∑–∞–∫–∞–∑

üì¶ –ü–æ–∑–∏—Ü–∏–∏: ${data.items}
üì± –ù–æ–º–µ—Ä: ${data.phone}
üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: ${displayUsername}
üè† –ê–¥—Ä–µ—Å: ${data.address}
üí∞ –û–ø–ª–∞—Ç–∞: ${data.payment}
üíµ –°—É–º–º–∞: ${data.sum} + 1000 –¥–æ—Å—Ç–∞–≤–∫–∞
      `.trim();

      const BOT_TOKEN = '8141919950:AAHKtnG4ziFfxlwWEYvexjuROx31LBWzIKg';       // ‚Üê –ó–ê–ú–ï–ù–ò –Ω–∞ —Å–≤–æ–π
      const CHAT_ID = '7170558675';       // ‚Üê –ó–ê–ú–ï–ù–ò –Ω–∞ —Å–≤–æ–π

      try {
        await fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
          method: "POST",
          headers: {
            "Content-Type": "application/json"
          },
          body: JSON.stringify({
            chat_id: CHAT_ID,
            text: text
          })
        });

        alert("–ó–∞–∫–∞–∑ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω! –ú–µ–Ω–µ–¥–∂–µ—Ä —Å–∫–æ—Ä–æ —Å–≤—è–∂–µ—Ç—Å—è —Å –≤–∞–º–∏.");
        document.getElementById("orderForm").reset();
      } catch (error) {
        alert("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –∑–∞–∫–∞–∑–∞.");
        console.error(error);
      }
    });
  </script>
</body>
</html>
